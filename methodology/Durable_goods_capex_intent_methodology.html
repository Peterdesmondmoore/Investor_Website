<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Capex Intent — Methodology</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body{font-family:"Merriweather",serif}
    h1,h2,h3,h4{font-family:"Inter",sans-serif}
    .container{max-width:960px}
    .rule{height:1px;background:linear-gradient(90deg,#e5e7eb,transparent)}
    .smallcaps{font-variant-caps:all-small-caps;letter-spacing:.04em}
    @media print{nav,.screen-only{display:none!important} body{color:#000}}
    .eq{font-family:"Merriweather",serif;font-style:italic}
    .box{border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;background:#fafafa}
    code{background:#f6f8fa;padding:.15rem .35rem;border-radius:.35rem}
  </style>
</head>
<body class="bg-white text-slate-800">
  <nav class="screen-only border-b">
    <div class="container mx-auto px-5 py-3 flex items-center justify-between text-sm text-slate-600">
      <div class="smallcaps">Methodology White Paper</div>
      <div>Version 1.0</div>
    </div>
  </nav>

  <main class="container mx-auto px-5 py-10">
    <header class="mb-10">
      <h1 class="text-3xl md:text-4xl font-semibold text-slate-900">Capex Intent</h1>
      <div class="mt-2 text-slate-600 text-sm">Composite signal capturing capital‑expenditure momentum through durable goods orders, including ex‑transportation when available.</div>
    </header>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">Abstract</h2>
      <p class="leading-7">The Capex Intent signal infers forward business investment trends from durable goods order data. It combines year‑over‑year and short‑term (3‑month annualised) growth rates for total and ex‑transport durable orders. When the ex‑transport series (<code>ADXTNO</code>) is present, it is prioritised. The composite detects <em>Expansion</em>, <em>Neutral</em>, or <em>Contraction</em> phases in capital expenditure cycles.</p>
    </section>

    <div class="rule mb-10"></div>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">1. Data</h2>
      <ul class="list-disc pl-6 leading-7">
        <li><strong>DGORDER</strong> — Manufacturers’ New Orders: Durable Goods (FRED).</li>
        <li><strong>ADXTNO</strong> — Manufacturers’ New Orders: Durable Goods Ex‑Transportation (FRED, preferred).</li>
        <li><strong>DGEXORD</strong> — Legacy alternate ex‑transport series (fallback).</li>
      </ul>
      <p class="leading-7 mt-3">Monthly nominal series from the U.S. Census Bureau’s M3 report (via FRED). Level data in USD millions.</p>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">2. Transformations</h2>
      <ol class="list-decimal pl-6 leading-7">
        <li><strong>YoY Growth:</strong> <span class="eq">g_{12} = X_t / X_{t−12} − 1</span></li>
        <li><strong>3‑Month Annualised Growth:</strong> <span class="eq">g_{3mAnn} = (X_t / X_{t−3})^4 − 1</span></li>
      </ol>
      <p class="text-sm text-slate-600 mt-2">The 3‑month annualised rate accelerates detection of inflection points in investment cycles.</p>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">3. Normalisation</h2>
      <div class="box text-sm">
        <div class="eq">z_{rob}(X)_t = \dfrac{X_t − median(X)_{t,w}}{1.4826·MAD(X)_{t,w}}</div>
        <div class="text-xs mt-2">Rolling window <span class="eq">w = 48</span> months (minimum 18). Median absolute deviation scaling reduces distortion from outliers.</div>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">4. Composite Construction</h2>
      <p class="leading-7">Weights adjust automatically depending on data availability:</p>
      <div class="box text-sm">
        <pre><code># If ADXTNO (ex‑transport) is available:
Capex_Intent = 0.4·z(ADXTNO_YoY) + 0.4·z(ADXTNO_3mAnn) + 0.2·z(DGORDER_YoY)
# Otherwise:
Capex_Intent = 0.5·z(DGORDER_YoY) + 0.5·z(DGORDER_3mAnn)</code></pre>
      </div>
      <p class="text-sm text-slate-600 mt-2">This adaptive weighting ensures emphasis on core durable orders when possible, while retaining comparability across datasets.</p>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">5. Regime Classification</h2>
      <div class="box text-sm">
        <div class="eq">If\ C_t > 0.75 → Expansion;\quad |C_t| ≤ 0.75 → Neutral;\quad C_t < −0.75 → Contraction</div>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">6. Implementation (Python)</h2>
      <div class="box text-sm">
<pre><code>import pandas as pd
import numpy as np

def robust_z(s, win=48, min_win=18):
    x = pd.to_numeric(s, errors="coerce").astype(float)
    w = max(min_win, min(win, x.dropna().size))
    med = x.rolling(w, min_periods=min_win).median()
    mad = (x - med).abs().rolling(w, min_periods=min_win).median()
    return (x - med) / (1.4826 * mad.replace(0, np.nan))

d = df_durables.copy()

ex_col = None
if "ADXTNO" in d.columns:
    ex_col = "ADXTNO"
elif "DGEXORD" in d.columns:
    ex_col = "DGEXORD"

def ann3(series):
    return (series / series.shift(3))**4 - 1.0

target_cols = ["DGORDER"] + ([ex_col] if ex_col else [])
for col in target_cols:
    d[f"{col}_YoY"]   = d[col].pct_change(12)
    d[f"{col}_3mAnn"] = ann3(d[col])

if ex_col:
    d["Z_EX_YoY"]   = robust_z(d[f"{ex_col}_YoY"])
    d["Z_EX_3mAnn"] = robust_z(d[f"{ex_col}_3mAnn"])
    d["Z_ALL_YoY"]  = robust_z(d["DGORDER_YoY"])
    d["Capex_Intent"] = (0.4*d["Z_EX_YoY"] + 0.4*d["Z_EX_3mAnn"] + 0.2*d["Z_ALL_YoY"])
    d["Capex_Sources"] = f"DGORDER + {ex_col}"
else:
    d["Z_ALL_YoY"]   = robust_z(d["DGORDER_YoY"])
    d["Z_ALL_3mAnn"] = robust_z(d["DGORDER_3mAnn"])
    d["Capex_Intent"] = 0.5*d["Z_ALL_YoY"] + 0.5*d["Z_ALL_3mAnn"]
    d["Capex_Sources"] = "DGORDER only"

hi, lo = 0.75, -0.75

def _regime(v):
    if pd.isna(v): return np.nan
    return "Expansion" if v > hi else ("Contraction" if v < lo else "Neutral")

d["Capex_Regime"] = d["Capex_Intent"].apply(_regime)

df_sig_capex = d
print(f"✅ Capex Intent built using: {d['Capex_Sources'].iloc[-1]}")
display(df_sig_capex.tail())
</code></pre>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">7. Interpretation</h2>
      <ul class="list-disc pl-6 leading-7">
        <li><strong>Expansion:</strong> rapid durable‑goods order growth — indicative of rising capex commitments.</li>
        <li><strong>Neutral:</strong> stable order momentum consistent with baseline investment pace.</li>
        <li><strong>Contraction:</strong> weakening orders — early signal of softening business investment.</li>
      </ul>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">8. Limitations</h2>
      <ul class="list-disc pl-6 leading-7">
        <li>Durable goods data are volatile and subject to large revisions; smoothing windows mitigate but do not remove noise.</li>
        <li>Transportation equipment orders can distort headline DGORDER; hence preference for ADXTNO when available.</li>
        <li>Fixed thresholds (±0.75) are heuristic; dynamic scaling by volatility regime may improve detection.</li>
      </ul>
    </section>

    <footer class="text-sm text-slate-500 border-t pt-6">© 2025. Methodology reference for the Capex Intent signal.</footer>
  </main>
</body>
</html>
