<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Investor Anatomy · Signal Catalogue</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/images/Favicon.png" />

  <!-- Netlify Identity Widget for Authentication -->
  <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Authentication System -->
  <script defer src="/js/auth-config.js"></script>
  <script defer src="/js/auth-guard.js"></script>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Clamp helper (Tailwind line-clamp plugin isn't in CDN by default) */
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    /* Improve select option readability on some browsers */
    select option {
      background: #000;
    }
  </style>
</head>

<body class="min-h-screen bg-black text-white">
  <!-- Background -->
  <div class="pointer-events-none fixed inset-0">
    <div class="absolute inset-0 bg-[radial-gradient(1200px_circle_at_20%_10%,rgba(99,102,241,0.25),transparent_55%),radial-gradient(900px_circle_at_80%_30%,rgba(34,211,238,0.18),transparent_55%),radial-gradient(900px_circle_at_50%_90%,rgba(16,185,129,0.12),transparent_60%)]"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/75 to-black"></div>
  </div>

  <div class="relative">
    <!-- Header (matches canvas: back home only) -->
    <div class="w-full">
      <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4">
        <div class="flex items-center gap-3">
          <a
            href="/"
            class="inline-flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/80 hover:bg-white/10 hover:text-white"
          >
            <img
              src="/images/Logo_Transparent.png"
              alt="Investor Anatomy"
              class="h-8 w-8 rounded-xl ring-1 ring-white/15"
            />
            <span class="hidden sm:inline">Back to Investor Anatomy</span>
          </a>
        </div>

        <div class="text-xs text-white/50">Investor Anatomy Catalogue</div>
      </div>
    </div>

    <!-- Hero -->
    <div class="mx-auto max-w-6xl px-4 pb-10 pt-8">
      <div class="rounded-[2.5rem] border border-white/10 bg-white/5 p-6 shadow-[0_30px_120px_-60px_rgba(0,0,0,0.95)] backdrop-blur">
        <div class="flex flex-col gap-6">
          <div>
            <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/70">
              <span class="inline-block h-3.5 w-3.5 rounded bg-white/20"></span>
              Investor Anatomy ▸ Catalogue
            </div>
            <h1 class="mt-4 text-2xl font-semibold tracking-tight md:text-4xl">
              Search and filter your signal system
            </h1>
            <p class="mt-3 max-w-2xl text-sm leading-relaxed text-white/70 md:text-base">
              A single catalogue for signals, sources, and outbound connections into themes, composites, and
              downstream modules.
            </p>
          </div>

          <div class="grid w-full grid-cols-2 gap-3 md:grid-cols-4">
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <div class="flex items-center justify-between">
                <div class="text-sm text-white/70">Signals</div>
                <span class="inline-block h-4 w-4 rounded bg-white/15"></span>
              </div>
              <div id="statSignals" class="mt-2 text-2xl font-semibold text-white">0</div>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <div class="flex items-center justify-between">
                <div class="text-sm text-white/70">Aggregate Signals</div>
                <span class="inline-block h-4 w-4 rounded bg-white/15"></span>
              </div>
              <div id="statAggregates" class="mt-2 text-2xl font-semibold text-white">0</div>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <div class="flex items-center justify-between">
                <div class="text-sm text-white/70">Reports</div>
                <span class="inline-block h-4 w-4 rounded bg-white/15"></span>
              </div>
              <div id="statReports" class="mt-2 text-2xl font-semibold text-white">0</div>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <div class="flex items-center justify-between">
                <div class="text-sm text-white/70">Strategy</div>
                <span class="inline-block h-4 w-4 rounded bg-white/15"></span>
              </div>
              <div id="statStrategy" class="mt-2 text-2xl font-semibold text-white">0</div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="mt-6">
          <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-5">
            <div class="rounded-2xl border border-white/10 bg-black/30 px-3 py-2">
              <div class="text-xs text-white/50">Source</div>
              <select
                id="sourceSelect"
                class="mt-1 w-full bg-transparent text-sm text-white/90 focus:outline-none"
              >
                <option value="">All</option>
              </select>
            </div>

            <div class="rounded-2xl border border-white/10 bg-black/30 px-3 py-2">
              <div class="text-xs text-white/50">Signal</div>
              <select
                id="signalSelect"
                class="mt-1 w-full bg-transparent text-sm text-white/90 focus:outline-none"
              >
                <option value="">All</option>
              </select>
            </div>

            <div class="rounded-2xl border border-white/10 bg-black/30 px-3 py-2">
              <div class="text-xs text-white/50">Aggregate Signal</div>
              <select
                id="aggregateSelect"
                class="mt-1 w-full bg-transparent text-sm text-white/90 focus:outline-none"
              >
                <option value="">All</option>
              </select>
            </div>

            <div class="rounded-2xl border border-white/10 bg-black/30 px-3 py-2">
              <div class="text-xs text-white/50">Report</div>
              <select
                id="outboundSelect"
                class="mt-1 w-full bg-transparent text-sm text-white/90 focus:outline-none"
              >
                <option value="">All</option>
              </select>
            </div>

            <div class="rounded-2xl border border-white/10 bg-black/30 px-3 py-2">
              <div class="text-xs text-white/50">Strategy</div>
              <select
                id="strategySelect"
                class="mt-1 w-full bg-transparent text-sm text-white/90 focus:outline-none"
              >
                <option value="">All</option>
              </select>
            </div>
          </div>

          <div class="mt-3">
            <div class="flex items-center gap-2 rounded-2xl border border-white/10 bg-black/30 px-4 py-3">
              <span class="inline-block h-4 w-4 rounded bg-white/15"></span>
              <input
                id="searchInput"
                placeholder="Search: id, name, description, outbound connections"
                class="w-full bg-transparent text-sm text-white/90 placeholder:text-white/35 focus:outline-none"
              />
            </div>
          </div>
        </div>

        <!-- Active filter pills -->
        <div id="activePills" class="mt-4 flex flex-wrap items-center gap-2"></div>
      </div>
    </div>

    <!-- Results -->
    <div class="mx-auto max-w-6xl px-4 pb-16">
      <div class="mb-4 flex items-center justify-between">
        <div class="text-sm text-white/70">
          Showing <span id="showCount" class="text-white">0</span> of
          <span id="totalCount" class="text-white">0</span>
        </div>
        <div class="text-xs text-white/50">Investor Anatomy Catalogue · Not investment advice</div>
      </div>

      <div id="cardsGrid" class="grid grid-cols-1 gap-4 md:grid-cols-2"></div>

      <div class="mt-10 text-xs text-white/45">
        Investor Anatomy Catalogue · Not investment advice.
      </div>
    </div>
  </div>

  <script>
    // ----------------------------
    // Data (from XML via Python)
    // ----------------------------
    const SIGNALS = [{"type": "Signal", "id": "employment_composition_signal", "name": "Employment Composition Signal", "source": "BLS", "description": "The employment composition signal combines labour force participation, the employment population ratio and the unemployment rate. Each series is robust standardised, weighted (participation 0.4, employment 0.4, unemployment  0.2) and smoothed, then scaled to a 0 100 index. Regimes indicate HOT (tight labour), NEUTRAL, or COOL (rising slack) based on the unsmoothed composite.", "signal_url": "https://investoranatomy.com/signal_report/Employment_Composition_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/employment_composition_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "job_flows_signal", "name": "Job Flows Signal", "source": "BLS", "description": "This job flows and labour dynamism signal uses BLS Business Dynamics (BDS) series to compute net job creation, 4 quarter moving averages and year over year growth. Weighted z scores emphasise gains and net creation while penalising losses; smoothing yields a composite where Hot regimes indicate strong dynamism and Cool regimes signal slackening.", "signal_url": "https://investoranatomy.com/signal_report/Job_Flows_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/job_flows_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "labor_market_tightness_signal", "name": "Labor Market Tightness Signal", "source": "BLS", "description": "The labour market tightness signal combines the quits minus layoffs differential with the job openings rate. After robust z scores and weighting (around 60% quits layoffs and 40% job openings), the composite classifies labour conditions as HOT, COOL or NEUTRAL.", "signal_url": "https://investoranatomy.com/signal_report/Labor_Market_Tightness_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/labour_market_tightness_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "sectoral_employment_diffusion_signal", "name": "Sectoral Employment Diffusion Signal", "source": "BLS", "description": "The sectoral employment diffusion signal measures the breadth of payroll growth across major sectors. Year over year growth is computed for each sector, and a diffusion index (share of sectors with positive growth) is robust standardised, smoothed and scaled to 0 100. Regimes are Hot (>+0.75), Neutral, or Cool (< 0.75) depending on the z score of the diffusion.", "signal_url": "https://investoranatomy.com/signal_report/Sectoral_Employment_Diffusion_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/sectoral_employment_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "underemployment_risk_signal", "name": "Underemployment Risk Signal", "source": "BLS", "description": "The underemployment risk signal measures labour-market slack by averaging robust z scores of U 6 underutilisation and median weeks unemployed. A three period EMA smooths the composite and regimes classify Hot (stress rising) above 0.75, Cool (stress easing) below  0.75 and Neutral otherwise.", "signal_url": "https://investoranatomy.com/signal_report/Underemployment_Risk_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/underemployment_risk_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "wage_growth_and_inflation_signal", "name": "Wage Growth and Inflation Signal", "source": "BLS", "description": "This wage growth and inflation signal combines Employment Cost Index (ECI) wage growth with a labour market tightness composite. After robust z scores and weighting (wages and tightness), the composite is smoothed and scaled; regimes classify Hot wage/inflation pressure (>0.75), Cool (< 0.75) and Neutral values.", "signal_url": "https://investoranatomy.com/signal_report/Wage_Growth_and_Inflation_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/wage_growth_and_inflation_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "weekly_hours_signal", "name": "Weekly Hours Signal", "source": "BLS", "description": "The weekly hours signal uses average weekly hours for total private and manufacturing sectors. Three month changes and level z scores are robustly standardised, averaged into a composite, smoothed and scaled; regimes indicate Hot labour demand (>0.75), Neutral and Cool (< 0.75) labour demand.", "signal_url": "https://investoranatomy.com/signal_report/Weekly_Hours_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/weekly_hours_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "aud_individual_market_analysis", "name": "AUD - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/AUD_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "cad_individual_market_analysis", "name": "CAD - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/CAD_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "copper_individual_market_analysis", "name": "Copper - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Copper_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "cross_sector_positioning", "name": "Cross-Sector Positioning", "source": "COT", "description": "This sector positioning signal aggregates Commitments of Traders positioning into macro sectors (Energy, Metals, Ags, FX, Rates). It computes the share of markets showing speculative crowding, hedger pressure and unwind risk, and flags sectors when at least 40% of markets are crowded or under hedger pressure or 30% face unwind risk.", "signal_url": "https://investoranatomy.com/signal_report/Cross_Sector_Positioning/", "methodology_urls": ["https://investoranatomy.com/methodology/cross_sector_positioning_pressure/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "crude_oil_individual_market_analysis", "name": "Crude Oil - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Crude_Oil_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "emini_sp500_individual_market_analysis", "name": "EMINI S&P 500 - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/EMINI_SP500_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "euro_individual_market_analysis", "name": "EURO - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/EURO_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "fed_fund_individual_market_analysis", "name": "Fed Fund - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/FedFund_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "forward_indicators_of_economic_cycles_momentum_of_flows", "name": "Forward Indicators of Economic Cycles (Momentum of Flows)", "source": "COT", "description": "The sector flow and momentum signal aggregates four week speculative flows across futures markets into sector level flow and momentum metrics. It distinguishes trend confirming flows from contrarian flows, computes average flow, flow momentum and crowding shares by sector, and interprets positive momentum and high trend confirming shares as pro cyclical while rising contrarian flows or negative momentum warn of reversals.", "signal_url": "https://investoranatomy.com/signal_report/Economic_Cycle_Proxies_Flow_Momentum/", "methodology_urls": ["https://investoranatomy.com/methodology/Forward_Indicators_Economic_Cycles/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "gbp_individual_market_analysis", "name": "GBP - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/GBP_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "global_risk_on_risk_off_positioning_tone", "name": "Global Risk-On / Risk-Off Positioning Tone", "source": "COT", "description": "The CoT market tone signal aggregates speculative crowding across all futures markets to gauge Risk On versus Risk Off sentiment. It calculates the difference between the share of crowded longs and shorts, applies a robust z score, and classifies regimes from Strong Risk On to Strong Risk Off based on thresholds.", "signal_url": "https://investoranatomy.com/signal_report/Global_Positioning_Tone/", "methodology_urls": ["https://investoranatomy.com/methodology/Global_Risk_OnOff_Positioning_Tone/"], "image_path": "", "outbound_connections": ["macro_theme_global_trade_demand"]}, {"type": "Signal", "id": "gold_individual_market_analysis", "name": "GOLD - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Gold_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["gold_market_analyst", "macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "hedger_pressure_indicator", "name": "Hedger Pressure Indicator", "source": "COT", "description": "The hedger pressure signal measures commercial hedger sentiment by aggregating markets where hedgers are heavily short (supply expansion) or heavily long (physical shortage). It computes deep short and deep long shares, applies robust z scores and labels regimes as High Supply Expansion Pressure, Moderate Supply Expansion or Normal; similar labels apply for shortage stress.", "signal_url": "https://investoranatomy.com/signal_report/Hedger_Pressure_Indicator/", "methodology_urls": ["https://investoranatomy.com/methodology/Hedger_Pressure_Indicator/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "lithium_hydroxide_individual_market_analysis", "name": "Lithium Hydroxide - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Lithium_Hydroxide_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "nasdaq_individual_market_analysis", "name": "Nasdaq - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/NASDAQ_100_Consolidated_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "palladium_individual_market_analysis", "name": "Palladium - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Palladium_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "platinum_individual_market_analysis", "name": "Platinum - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Platinum_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "portfolio_level_early_warning_system", "name": "Portfolio-Level Early Warning System", "source": "COT", "description": "The early warning index aggregates extreme positioning, crowded trades and squeeze/exhaustion breadth across futures markets. Robustly standardised breadth measures for extremes, crowding, squeeze and exhaustion are averaged; the composite identifies High Alert (1.0), Elevated (0.5 1.0), Normal ( 0.5 to 0.5) or Subdued (  0.5) instability regimes.", "signal_url": "https://investoranatomy.com/signal_report/Portfolio_Level_Early_Warning_System/", "methodology_urls": ["https://investoranatomy.com/methodology/Portfolio_Level_Early_Warning_System/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "regime_specific_macro_themes", "name": "Regime-Specific Macro Themes", "source": "COT", "description": "CoT regime-specific macro themes: inflation, slowdown, supply stress, disinflation.", "signal_url": "https://investoranatomy.com/signal_report/Regimes_specific_Macro_Themes_Continuous/", "methodology_urls": [], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment", "macro_theme_global_trade_demand"]}, {"type": "Signal", "id": "russell_e_mini_individual_market_analysis", "name": "Russell E-mini - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Russell_EMini_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "silver_individual_market_analysis", "name": "SILVER - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/Silver_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "sof_3m_individual_market_analysis", "name": "SOF 3M - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/SOF_3M_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_liquidity_monetary_conditions"]}, {"type": "Signal", "id": "sof_5y_individual_market_analysis", "name": "SOF 5Y - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/SOF_5Y_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_liquidity_monetary_conditions"]}, {"type": "Signal", "id": "specs_vs_hedgers_divergence_reversal_risk", "name": "Specs vs Hedgers Divergence: Reversal Risk", "source": "COT", "description": "The specs vs hedgers divergence signal measures the share of markets where speculative and hedger positions strongly oppose each other (Spec and Hedger z scores have opposite signs and exceed  1). The divergence share is robust standardised and classified into High, Moderate, Normal or Low divergence regimes.", "signal_url": "https://investoranatomy.com/signal_report/Specs_vs_Hedgers_Divergence_Reversal_Risk/", "methodology_urls": ["https://investoranatomy.com/methodology/specs_vs_hedgers_divergence_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "squeeze_exhaustion_risk_indicators", "name": "Squeeze & Exhaustion Risk Indicators", "source": "COT", "description": "This squeeze and exhaustion breadth signal aggregates tactical flags indicating short squeeze risk and trend exhaustion across futures markets. For each date, it computes the share of markets flagged for squeezes or exhaustion, applies robust z scores and labels regimes as High, Moderate or Normal risk for squeezes or exhaustion accordingly.", "signal_url": "https://investoranatomy.com/signal_report/Squeeze_Exhaustion_Risk/", "methodology_urls": ["https://investoranatomy.com/methodology/Squeeze_Exhaustion_Targets/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "usd_individual_market_analysis", "name": "USD - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/USD_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "yen_individual_market_analysis", "name": "YEN - Individual Market Analysis", "source": "COT", "description": "This signal translates weekly Commitment of Traders (CoT) data into a trade focused view for a single futures market. It calculates net positioning, positioning stretch and recent flow shifts, and combines them into a composite that flags crowding, squeeze risk or exhaustion risk; extreme positioning and shifts guide tactical setups.", "signal_url": "https://investoranatomy.com/signal_report/YEN_CoT_Signals/", "methodology_urls": ["https://investoranatomy.com/methodology/single_market_cot_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics"]}, {"type": "Signal", "id": "capex_intent_signal", "name": "Capex Intent Signal", "source": "FRED", "description": "The capex intent signal turns U.S. durable goods orders into a composite indicator of capital expenditure momentum. It combines year over year and three month annualised growth rates of headline and ex transport durable goods orders, applies robust z scores and weights the components, then classifies regimes as Expansion, Neutral or Contraction.", "signal_url": "https://investoranatomy.com/signal_report/Capex_Intent/", "methodology_urls": ["https://investoranatomy.com/Capex_Intent_Methodology"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Signal", "id": "cpi_vs_ppi_divergence_signal", "name": "CPI vs PPI Divergence Signal", "source": "FRED", "description": "This inflation divergence signal measures the difference between producer and consumer inflation by subtracting the PPI year over year rate from CPI. A robust z score of the gap identifies inflationary pressure regimes: HOT when the gap and CPI are elevated, COOL when producer prices lag consumer prices, and NEUTRAL otherwise.", "signal_url": "https://investoranatomy.com/signal_report/CPI_PPI_Divergence/", "methodology_urls": ["https://investoranatomy.com/Methodology/US_CPI_vs_PPI_Divergence_Inflation/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "credit_conditions_signal", "name": "Credit Conditions Signal", "source": "FRED", "description": "The credit conditions signal combines high yield and BBB corporate bond spreads with the VIX to monitor funding stress. Each component is robust standardised and averaged; the composite's z score defines Tightening conditions above 0.75, Easing below  0.75 and Neutral in between.", "signal_url": "https://investoranatomy.com/signal_report/Credit_Conditions/", "methodology_urls": ["https://investoranatomy.com/methodology/credit_conditions_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_credit_conditions"]}, {"type": "Signal", "id": "credit_spreads_signal", "name": "Credit Spreads Signal", "source": "FRED", "description": "The credit spreads signal measures corporate funding stress using ICE BofA high yield and corporate master option adjusted spreads. It standardises level and momentum features with robust z scores, combines them into a composite and classifies regimes as EASY, NORMAL, TIGHTENING or STRESSED according to thresholds.", "signal_url": "https://investoranatomy.com/signal_report/Credit_Spreads/", "methodology_urls": ["https://investoranatomy.com/Methodology/credit_spreads_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_credit_conditions"]}, {"type": "Signal", "id": "durable_goods_ex_transportation_signal", "name": "Durable Goods ex-Transportation Signal", "source": "FRED", "description": "The durable goods ex transportation signal uses the FRED ADXTNO series for manufacturers' new orders excluding transportation. It computes year over year and three month percentage changes, optionally applies a robust z score, and classifies regimes as Bullish when orders grow strongly, Bearish when momentum is negative, and Neutral otherwise.", "signal_url": "https://investoranatomy.com/signal_report/Durable_Goods_Ex_Transportation/", "methodology_urls": ["https://investoranatomy.com/Methodology/Manufactureres_new_goods/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Signal", "id": "energy_adjusted_metals_tailwind_signal", "name": "Energy-Adjusted Metals Tailwind Signal", "source": "FRED", "description": "This energy adjusted metals tailwind signal regresses copper prices on oil prices and the U.S. dollar to extract a residual representing copper specific demand. The residual is robust standardised; positive z scores indicate a Demand Tailwind, negative values indicate a Headwind and near zero values suggest Neutral conditions.", "signal_url": "https://investoranatomy.com/signal_report/Energy_Adjusted_Metals_Tailwind/", "methodology_urls": ["https://investoranatomy.com/methodology/energy_adjusted_metals_tailwind_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_global_growth_economic_cycles"]}, {"type": "Signal", "id": "explicit_slack_gap_signal", "name": "Explicit Slack Gap Signal", "source": "FRED", "description": "This labour market slack gap signal computes the difference between the unemployment rate and the natural rate of unemployment, adds a three month change, then applies robust z scores. It classifies regimes as Tight, Slackening or Neutral and flags momentum and confidence levels for policy analysis.", "signal_url": "https://investoranatomy.com/signal_report/Explicit_Slack_Gap_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/explicit_slack_gap_signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "federal_reserve_liquidity_composite_signal", "name": "Federal Reserve Liquidity Composite Signal", "source": "FRED", "description": "The Federal Reserve liquidity composite blends M2, Federal Reserve assets, reserve balances and the overnight reverse repo facility. Inputs are resampled to month end, their year over year and three month changes are computed and robust standardised. The composite is classified as Expansion, Neutral or Contraction, providing a broad gauge of liquidity.", "signal_url": "https://investoranatomy.com/signal_report/Federal_Reserve_Liquidity_Composite/", "methodology_urls": [], "image_path": "", "outbound_connections": ["macro_theme_us_liquidity_monetary_conditions"]}, {"type": "Signal", "id": "financial_stress_composite_signal", "name": "Financial Stress Composite Signal", "source": "FRED", "description": "The financial stress composite blends the financial stress index, high yield spreads and the yield curve slope. Each component is robust standardised and averaged; the composite classifies regimes such as High Stress, Neutral or Low Stress.", "signal_url": "https://investoranatomy.com/signal_report/Financial_Stress_Composite/", "methodology_urls": [], "image_path": "", "outbound_connections": ["macro_theme_us_credit_conditions"]}, {"type": "Signal", "id": "financial_stress_index_signal", "name": "Financial Stress Index Signal", "source": "FRED", "description": "This signal uses the St. Louis Fed Financial Stress Index (STLFSI4). The weekly series is converted to a robust z score and mapped into Bearish, Neutral or Bullish regimes; high values reflect financial stress and risk off conditions.", "signal_url": "https://investoranatomy.com/signal_report/Financial_Stress_Index/", "methodology_urls": ["https://investoranatomy.com/Methodology/Financial_Stress/"], "image_path": "", "outbound_connections": ["macro_theme_us_credit_conditions"]}, {"type": "Signal", "id": "housing_lead_signal", "name": "Housing Lead Signal", "source": "FRED", "description": "The housing lead signal blends momentum in building permits and housing starts with the headwind from mortgage rates. Six month and three month annualised growth rates for permits and starts are robust standardised; mortgage rates enter negatively. A weighted composite (0.45 0.35 0.20) is mapped to Expanding, Neutral or Contracting housing cycles.", "signal_url": "https://investoranatomy.com/signal_report/Housing_Lead/", "methodology_urls": ["https://investoranatomy.com/methodology/housing_lead_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Signal", "id": "industrial_production_signal", "name": "Industrial Production Signal", "source": "FRED", "description": "The industrial production signal combines year over year growth in the industrial production index and the mining share of GDP. After aligning series to month start and computing YoY rates, regimes are labelled Bullish when industrial production growth is above +3% and mining share growth is  0%, Bearish when industrial production is contracting and mining share rising, and Neutral otherwise.", "signal_url": "https://investoranatomy.com/signal_report/Industrial_Production/", "methodology_urls": ["https://investoranatomy.com/Methodology/industrial_production_signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Signal", "id": "inflation_signal", "name": "Inflation Signal", "source": "FRED", "description": "The Fed inflation signal blends a wide range of macro series including headline and core CPI, breakevens, liquidity proxies, industrial production, copper, USD, economic policy uncertainty and Fed funds into a composite inflation pressure indicator. Each series is robust standardised and weighted; the composite is scaled and mapped to HOT, NEUTRAL or COOL regimes.", "signal_url": "https://investoranatomy.com/signal_report/US_Inflation_Signal/", "methodology_urls": ["https://investoranatomy.com/Methodology/fed_inflation_signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "inflation_term_structure_signal", "name": "Inflation Term-Structure Signal", "source": "FRED", "description": "This inflation term structure signal uses the 5 year and 10 year breakeven inflation rates and the 10 year real TIPS yield. Each series is resampled to month end, robust standardised and combined with weights (0.4, 0.3, 0.3); the composite's z score is mapped to Reflation, Neutral or Disinflation regimes using  0.75 thresholds.", "signal_url": "https://investoranatomy.com/signal_report/Inflation_Term_Structure/", "methodology_urls": ["https://investoranatomy.com/methodology/inflation_term_structure_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "labor_market_turnover_signal", "name": "Labor Market Turnover Signal", "source": "FRED", "description": "This labour market turnover signal tracks the spread between quits and layoffs/discharges. Robust z scores of the spread and its momentum identify regimes: Bullish labour turnover when quits exceed layoffs by more than one standardised unit, Neutral when within  1, and Bearish when layoffs exceed quits.", "signal_url": "https://investoranatomy.com/signal_report/Labor_Market_Turnover/", "methodology_urls": ["https://investoranatomy.com/methodology/labor_market_turnover/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "labour_market_momentum_signal", "name": "Labour Market Momentum Signal", "source": "FRED", "description": "The labour market momentum signal measures employment strength by combining initial and continuing jobless claims (inverted) with the three month change in nonfarm payrolls. After robust standardisation, the composite's z score above 0.75 indicates Tightening labour momentum, below  0.75 signals Softening, and values in between are Neutral.", "signal_url": "https://investoranatomy.com/signal_report/Labour_Market_Momentum/", "methodology_urls": ["https://investoranatomy.com/methodology/labour_market_momentum_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "m2_money_supply_signal", "name": "M2 Money Supply Signal", "source": "FRED", "description": "The M2 money supply signal uses the US M2 stock to compute year over year growth and three month momentum. If growth exceeds 6% or the three month change is above 1%, the signal is Bullish; if growth falls below 2% or the three month change is below  1%, it is Bearish; otherwise it is Neutral.", "signal_url": "https://investoranatomy.com/signal_report/M2_Money_Supply/", "methodology_urls": ["https://investoranatomy.com/Methodology/m_2_money_supply/"], "image_path": "", "outbound_connections": ["macro_theme_us_liquidity_monetary_conditions"]}, {"type": "Signal", "id": "market_implied_inflation_signal", "name": "Market Implied Inflation Signal", "source": "FRED", "description": "The market implied inflation signal summarises forward inflation expectations from 5 year and 10 year TIPS breakevens. It computes year over year and three month annualised changes, robust standardises level and momentum components, weights them (levels receive the largest weight), and classifies the composite as RISING, STABLE or FALLING expectations.", "signal_url": "https://investoranatomy.com/signal_report/Market_Implied_Inflation/", "methodology_urls": ["https://investoranatomy.com//Methodology/market_implied_inflation_signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "market_volatility_vix_signal", "name": "Market Volatility (VIX) Signal", "source": "FRED", "description": "The market volatility (VIX) signal builds a composite from the VIX level, short  and medium term momentum, percentile rank and gaps to intuitive thresholds (20 and 30). The weighted z score composite is mapped to regimes ranging from CALM (<20 and z<0) to NORMAL, ELEVATED, STRESSED and CRISIS; it serves as a risk sentiment gauge.", "signal_url": "https://investoranatomy.com/signal_report/VIX_Market_Volatility/", "methodology_urls": ["https://investoranatomy.com/Methodology/vix_signal_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_cross_asset_positioning_sentiment"]}, {"type": "Signal", "id": "policy_relevant_inflation_pce_signal", "name": "Policy-Relevant Inflation (PCE) Signal", "source": "FRED", "description": "This policy relevant inflation signal blends headline and core PCE inflation rates. Each series is robust standardised and equally weighted; the composite's z score above 0.75 indicates Hot policy relevant inflation, below  0.75 indicates Cool inflation, and intermediate values are Neutral.", "signal_url": "https://investoranatomy.com/signal_report/Policy_Relevant_Inflation_PCE/", "methodology_urls": ["https://investoranatomy.com/methodology/policy_relevant_inflation_signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_inflation_price_dynamics"]}, {"type": "Signal", "id": "private_credit_impulse_signal", "name": "Private Credit Impulse Signal", "source": "FRED", "description": "This signal measures acceleration or deceleration in private sector credit growth by averaging six month annualised growth rates of bank credit, business loans and consumer loans. After robust standardisation, composite values above 0.75 indicate accelerating credit expansion, below 0.75 indicate deceleration and near zero indicate stability.", "signal_url": "https://investoranatomy.com/signal_report/Private_Credit_Impulse/", "methodology_urls": ["https://investoranatomy.com/methodology/private_credit_impulse_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_credit_conditions"]}, {"type": "Signal", "id": "real_interest_rate_trend_signal", "name": "Real Interest Rate Trend Signal", "source": "FRED", "description": "This real interest rate trend signal uses the 10 year TIPS real yield. A six month moving average forms the trend; when the yield is more than 0.05 percentage points below the trend, the signal is Bullish (accommodative), more than 0.05 above the trend it is Bearish (restrictive), and within  0.05 it is Neutral.", "signal_url": "https://investoranatomy.com/signal_report/Real_Interest_Rate_Trend/", "methodology_urls": ["https://investoranatomy.com/Methodology/Real_Interest_Rate_Trend_Signal/"], "image_path": "", "outbound_connections": ["macro_theme_us_liquidity_monetary_conditions"]}, {"type": "Signal", "id": "u_s_treasury_yield_curve_signal", "name": "U.S. Treasury Yield Curve Signal", "source": "FRED", "description": "This US Treasury yield curve slope signal compares the 10 year constant maturity Treasury rate to the effective federal funds rate. It computes a monthly slope and a three month moving average trend; Bullish regimes occur when the slope is flat or inverted, Bearish when the slope exceeds 1.5% or is steepening above its trend, and Neutral otherwise.", "signal_url": "https://investoranatomy.com/signal_report/US_Treasury_Yield_Curve/", "methodology_urls": ["https://investoranatomy.com/methodology/us_treasury_yield_curve_slope/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Signal", "id": "university_of_michigan_consumer_sentiment_signal", "name": "University of Michigan Consumer Sentiment Signal", "source": "FRED", "description": "This consumer sentiment signal resamples the University of Michigan sentiment index to month end, computes year over year and three month changes, applies a robust z score to the level and blends momentum with level context. The composite classifies sentiment as Bullish, Neutral or Bearish.", "signal_url": "https://investoranatomy.com/signal_report/Consumer_Sentiment/", "methodology_urls": ["https://investoranatomy.com/Methodology/Consumer_Sentiment/"], "image_path": "", "outbound_connections": ["macro_theme_us_labour_market"]}, {"type": "Signal", "id": "usd_index_signal", "name": "USD Index Signal", "source": "FRED", "description": "The USD index signal uses the broad trade weighted U.S. dollar index. A 12 month moving average and six month percentage change are computed; the signal is classified as Weakening when the six month change is below  5% or the index is below its 12 month average, Strengthening when the change is above +5% or the index is above its average, and Neutral otherwise.", "signal_url": "https://investoranatomy.com/signal_report/USD_Index_Signal/", "methodology_urls": ["https://investoranatomy.com/Methodology/usd_index_signal/"], "image_path": "", "outbound_connections": ["macro_theme_global_inflation_fx_dynamics", "macro_theme_global_trade_demand"]}, {"type": "Signal", "id": "yield_curve_slope_signal", "name": "Yield Curve Slope Signal", "source": "FRED", "description": "The yield curve slope signal evaluates the U.S. Treasury term structure by computing the 10 year minus 2 year and 10 year minus 3 month spreads. Robust z scores of these spreads are averaged; a composite above 0.75 indicates a Steepening curve, below  0.75 indicates an Inverted curve and values in between are Flat/Neutral.", "signal_url": "https://investoranatomy.com/signal_report/Yield_Curve_Slope/", "methodology_urls": ["https://investoranatomy.com/methodology/yield_curve_slope_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Aggregate_Signal", "id": "asset_class_implications_signal", "name": "Asset Class Implications Signal", "source": "Investor Anatomy", "description": "Translate the provided Layer 2 macro regime (phase, momentum, stability) into a simple, neutral summary of high-level asset-class postures for context and risk framing, without adding analysis, forecasts, or recommendations.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Strategy", "id": "Brazilian_Equities_Strategy", "name": "Brazilian Equities", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Brazilian Equities.", "signal_url": "https://investoranatomy.com/investment-strategy/brazilian-equities/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Signal", "id": "WIPchanges_in_weekly_macro_themes_composites", "name": "Changes in Weekly Macro Themes & Composites", "source": "Investor Anatomy", "description": "Comparing last week's macro-theme and composite assessments with the latest updates.", "signal_url": "https://investoranatomy.com/signal_report/Changes_in_Weekly_Macro_Themes_and_Composites/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "Copper_Strategy", "name": "Copper Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Copper.", "signal_url": "https://investoranatomy.com/investment-strategy/copper-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Signal", "id": "explicit_neutral_rate_r_proxy_signal", "name": "Explicit Neutral Rate (r*) Proxy Signal", "source": "Investor Anatomy", "description": "Explicit Neutral Rate (r*) Proxy Signal based on market-implied real rates and term premiums.", "signal_url": "https://investoranatomy.com/signal_report/Explicit_Neutral_Rate_Signal/", "methodology_urls": ["https://investoranatomy.com/methodology/methodology/explicit_neutral-rate_methodology/"], "image_path": "", "outbound_connections": ["macro_theme_us_growth_business_cycle"]}, {"type": "Aggregate_Signal", "id": "fed_watcher_macro_signal_Signal", "name": "Fed Watcher Macro Signal Signal", "source": "Investor Anatomy", "description": "Conditions-based synthesis of inflation, labour, liquidity, credit, and risk signals to evaluate whether current macro fundamentals justify a Federal Reserve policy adjustment.", "signal_url": "https://investoranatomy.com/signal_report/Fed_Watcher_Macro_Signal_Signal/", "methodology_urls": [], "image_path": "", "outbound_connections": ["Federal_Reserve_Watcher", "federal_reserve_watcher_final_report"]}, {"type": "Signal", "id": "federal_reserve_beige_book_executive_summary", "name": "Federal Reserve Beige Book   Executive Summary", "source": "Investor Anatomy", "description": "District-level synthesis of US activity, labour, and price conditions—highlighting sector and regional dispersion—to surface emerging growth, inflation, and financial-stress risks.", "signal_url": "https://investoranatomy.com/signal_report/Fed_Watcher_Beige_Book_Summary/", "methodology_urls": [], "image_path": "", "outbound_connections": ["Federal_Reserve_Watcher", "federal_reserve_watcher_final_report"]}, {"type": "Signal", "id": "federal_reserve_projections_Signal", "name": "Federal Reserve Projections Signal", "source": "Investor Anatomy", "description": "Synthesises Fed-authored projections and communications to infer the Federal Reserve’s internally implied outlook for growth, inflation, labour, and dominant policy risks.", "signal_url": "https://investoranatomy.com/signal_report/Fed_Watcher_Projections_Signal/", "methodology_urls": [], "image_path": "", "outbound_connections": ["Federal_Reserve_Watcher", "federal_reserve_watcher_final_report"]}, {"type": "Signal", "id": "federal_reserve_tone_decoder", "name": "Federal Reserve Tone Decoder", "source": "Investor Anatomy", "description": "Chronologically scores and classifies Fed communications into structured tone signals (labour, inflation, bias, risks, divergence) to infer the committee’s prevailing policy stance.", "signal_url": "https://investoranatomy.com/signal_report/Fed_Watcher_Tone_Decoder/", "methodology_urls": [], "image_path": "", "outbound_connections": ["Federal_Reserve_Watcher", "federal_reserve_watcher_final_report"]}, {"type": "Report", "id": "federal_reserve_watcher_final_report", "name": "Federal Reserve Watcher Consolidated", "source": "Investor Anatomy", "description": "A briefing framework that distils Federal Reserve policy conditions into a clear regime view, directional outlook, and decision-ready interpretation for upcoming meetings.", "signal_url": "https://investoranatomy.com/signal_report/Federal_Reserve_Watcher_Consolidated/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Aggregate_Signal", "id": "federal_reserve_watcher", "name": "Federal Reserve Watcher Decision Engine", "source": "Investor Anatomy", "description": "Integrates macro conditions, Fed communications, projections, and real-economy confirmation to produce a probability-weighted policy decision and guidance bias for the upcoming FOMC meeting.", "signal_url": "https://investoranatomy.com/signal_report/Federal_Reserve_Watcher/", "methodology_urls": [], "image_path": "", "outbound_connections": ["federal_reserve_watcher_final_report"]}, {"type": "Signal", "id": "WIPgold_outlook", "name": "Gold   Outlook", "source": "Investor Anatomy", "description": "This signal uses the St. Louis Fed Financial Stress Index (STLFSI4). The weekly series is converted to a robust z score and mapped into Bearish, Neutral or Bullish regimes; high values reflect financial stress and risk off conditions.", "signal_url": "https://investoranatomy.com/signal_report/Outlook_Gold_Thesis_Applied/", "methodology_urls": ["https://investoranatomy.com/Methodology/Financial_Stress/"], "image_path": "", "outbound_connections": []}, {"type": "Report", "id": "gold_market_analyst", "name": "Gold Market Analyst", "source": "Investor Anatomy", "description": "The Gold Market Analyst combines research and signal analysis to provide a comprehensive view of the gold market.", "signal_url": "https://investoranatomy.com/signal_report/Gold_Research_Analyst/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Signal", "id": "IA_Gold_Media_Watcher", "name": "GOLD Media Watcher", "source": "Investor Anatomy", "description": "The gold media watcher signal monitors news and media sentiment related to gold.", "signal_url": "https://investoranatomy.com/signal_report/Gold_Media_Watcher/", "methodology_urls": [], "image_path": "", "outbound_connections": ["gold_market_analyst"]}, {"type": "Signal", "id": "gold_pricing", "name": "Gold Pricing", "source": "Investor Anatomy", "description": "Gold Pricing Signal.", "signal_url": "https://investoranatomy.com/signal_report/Gold_Pricing_Signal/", "methodology_urls": [], "image_path": "", "outbound_connections": ["gold_market_analyst"]}, {"type": "Aggregate_Signal", "id": "gold_regime_state_deterministic", "name": "Gold Regime State Deterministic", "source": "Investor Anatomy", "description": "A deterministic rules-engine prompt that maps a fixed set of gold-relevant macro signals (liquidity, real rates, USD/FX, inflation credibility, stress, and positioning) into a filled, non-probabilistic “Gold Regime State — Deterministic Summary” HTML table, including 1M/3M horizon bias and conflict flags.", "signal_url": "https://investoranatomy.com/signal_report/Gold_Regime_State/", "methodology_urls": [], "image_path": "", "outbound_connections": ["gold_market_analyst"]}, {"type": "Signal", "id": "IA_Gold_Research_Analyst", "name": "Gold Research Analyst", "source": "Investor Anatomy", "description": "The Gold Market Analyst is a modular analysis framework that combines price diagnostics, positioning regimes, research synthesis, media narrative monitoring, and macro signal interpretation to form a coherent view of gold’s current state. Together, these components translate market data, positioning, research, and narratives into structured, transparent diagnostics designed for context and risk awareness rather than prediction or trade instruction.", "signal_url": "https://investoranatomy.com/signal_report/Gold_Research_Analyst/", "methodology_urls": [], "image_path": "", "outbound_connections": ["gold_market_analyst"]}, {"type": "Strategy", "id": "Gold_Strategy", "name": "Gold Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Gold.", "signal_url": "https://investoranatomy.com/investment-strategy/gold-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "Lithium_Hydroxide_Strategy", "name": "Lithium Hydroxide Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Lithium Hydroxide.", "signal_url": "https://investoranatomy.com/investment-strategy/lithium-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Report", "id": "macro_theme_cross_asset_positioning_sentiment", "name": "Macro Theme : Cross-Asset Positioning & Sentiment", "source": "Investor Anatomy", "description": "Synthesises positioning, flow, and sentiment signals across asset classes to identify regime conditions, crowding risks, and macro-relevant inflection points.", "signal_url": "https://investoranatomy.com/signal_report/ia_cross_asset_positioning_sentiment/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_global_growth_economic_cycles", "name": "Macro Theme : Global Growth & Economic Cycles", "source": "Investor Anatomy", "description": "Aggregates commodity positioning, cycle momentum proxies, and metals-led demand signals to assess the current global growth and economic cycle regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_global_growth_and_economic_cycles/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_global_inflation_fx_dynamics", "name": "Macro Theme : Global Inflation & FX Dynamics", "source": "Investor Anatomy", "description": "Interprets global inflation and FX conditions through US dollar regime and G10 currency positioning to characterise disinflationary pressures and cross-currency stress dynamics.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_inflation_and_price_dynamics/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_global_macro_overview", "name": "Macro Theme : Global Macro Overview", "source": "Investor Anatomy", "description": "Synthesising global growth, global inflation & FX dynamics, and the consolidated US macro backdrop into a single global view.", "signal_url": "https://investoranatomy.com/signal_report/Composite_Global_Macro_Overview/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_global_trade_demand", "name": "Macro Theme : Global Trade & Demand", "source": "Investor Anatomy", "description": "Assesses global trade intensity and capital flows by combining USD regime signals, macro positioning (e.g., supply stress), and speculative risk tone to characterise how currency dynamics and demand conditions influence cross-border trade and investment activity.", "signal_url": "https://investoranatomy.com/signal_report/ia_global_trade_demand/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_us_credit_conditions", "name": "Macro Theme : US Credit Conditions", "source": "Investor Anatomy", "description": "Integrates credit spreads, systemic-stress indicators, and private-credit growth signals to assess the prevailing US credit-conditions regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_credit_conditions/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_us_growth_business_cycle", "name": "Macro Theme : US Growth & Business Cycle", "source": "Investor Anatomy", "description": "Synthesises key growth-related indicators (capex, production, durables, housing, yield-curve and monetary signals) into a cohesive assessment of the current US economic expansion, slowdown or contraction.", "signal_url": "https://investoranatomy.com/signal_report/ia_growth_and_business_cycle/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_us_inflation_price_dynamics", "name": "Macro Theme : US Inflation & Price Dynamics", "source": "Investor Anatomy", "description": "Systematically synthesises realised inflation, cost pressures, and market expectations to assess the prevailing US inflation regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_inflation_and_price_dynamics/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_us_labour_market", "name": "Macro Theme : US Labour Market", "source": "Investor Anatomy", "description": "Synthesises employment composition, labour-market tightness, wage and hours signals, and worker flows/sentiment to assess the prevailing US labour-market regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_labour_market/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Report", "id": "macro_theme_us_liquidity_monetary_conditions", "name": "Macro Theme : US Liquidity & Monetary Conditions", "source": "Investor Anatomy", "description": "Synthesises Federal Reserve liquidity measures, money supply, real-rate signals and SOFR positioning to assess the current US monetary and liquidity regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_liquidity_and_monetary_conditions/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Signal", "id": "WIPportfolio_advisor_macro_based_portfolio_guidance", "name": "Portfolio Advisor : Macro-Based Portfolio Guidance", "source": "Investor Anatomy", "description": "Portfolio Advisor: regime-based portfolio guidance for a growth-oriented portfolio using global macro and portfolio context.", "signal_url": "https://investoranatomy.com/signal_report/Portfolio_Advisor_Portfolio_Guidance/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "Quantum_Computing_Pure_Play_Strategy", "name": "Quantum Computing Pure Play Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Quantum Computing.", "signal_url": "https://investoranatomy.com/investment-strategy/quantum-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Aggregate_Signal", "id": "Regime_Phase_Momentum_signal", "name": "Regime Phase Momentum Signal", "source": "Investor Anatomy", "description": "Compare the latest and prior Layer 1 regime snapshots and return a strict JSON summary that clearly explains how confidence, alignment, stability, and tensions have changed—and whether transition risk is rising or easing—without reinterpreting data or restating the regime.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Aggregate_Signal", "id": "Regime_Phase_signal", "name": "Regime Phase Signal", "source": "Investor Anatomy", "description": "Combine the provided theme-level regime summaries into one authoritative macro regime label and confidence score, using fixed rules and weights, and return a strict JSON output with a clear, plain-English executive summary and key risks—without adding or reinterpreting analysis.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Aggregate_Signal", "id": "Regime_Phase_Transition_Risk_signal", "name": "Regime Phase Transition and Risk Signal", "source": "Investor Anatomy", "description": "Determine the current macro regime stage, momentum, and policy-surprise risk using only the provided Layer 1 data, and return a strict JSON summary with clear, plain-English insights for senior decision-makers.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": ["US_macro_regime_assessment_signal"]}, {"type": "Strategy", "id": "Silver_Strategy", "name": "Silver Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for Silver.", "signal_url": "https://investoranatomy.com/investment-strategy/silver_strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Signal", "id": "US_Macro_Regime_State_Momentum_Transition_Risk", "name": "US Macro Regime State, Momentum and Transition Risk", "source": "Investor Anatomy", "description": "An integrated view of US regime conditions, momentum shifts, structural tensions, and transition risks.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Report", "id": "US_macro_regime_assessment_signal", "name": "US Macro Regime State, Momentum and Transition Risk", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for US Mid Cap Value and Growth.", "signal_url": "https://investoranatomy.com/signal_report/ia_us_macro_regime/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "US_Mid_Cap_Strategy", "name": "US Mid Cap Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for US Mid Cap Value and Growth.", "signal_url": "https://investoranatomy.com/investment-strategy/us-midcap-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "US_Small_Cap_Strategy", "name": "US Small Cap Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for US Small Cap.", "signal_url": "https://investoranatomy.com/investment-strategy/small-cap-strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}, {"type": "Strategy", "id": "US_Industrial_Strategy", "name": "US_Industrial Strategy", "source": "Investor Anatomy", "description": "Investor Anatomy Investment Strategy for US Industrials.", "signal_url": "https://investoranatomy.com/investment-strategy/US_industrial_strategy/", "methodology_urls": [], "image_path": "", "outbound_connections": []}];

    // ----------------------------
    // Helpers
    // ----------------------------
    const uniq = (arr) => Array.from(new Set(arr)).sort((a,b)=>String(a).localeCompare(String(b)));
    const typeOf = (s) => String(s.type || "").toLowerCase();
    const isSignal = (s) => typeOf(s) === "signal";
    const isAggregate = (s) => typeOf(s) === "aggregate_signal";
    const isReport = (s) => typeOf(s) === "report";
    const isStrategy = (s) => typeOf(s) === "strategy";
    const aggregateNameMap = new Map(
      SIGNALS.filter(isAggregate).map(s => [s.id, s.name]).filter(([id, name]) => id && name)
    );
    const outboundLabel = (id) => aggregateNameMap.get(id) || id;
    const optionLabel = (s) => s.name || s.id || "";

    function pill(label, onRemoveJs) {
      return `
        <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm text-white/90">
          ${label}
          <button
            class="rounded-full p-1 text-white/70 hover:bg-white/10 hover:text-white"
            aria-label="Remove filter"
            onclick="${onRemoveJs}"
          >
            <span class="inline-block h-3.5 w-3.5 rounded bg-white/20"></span>
          </button>
        </span>
      `;
    }

    function clearButton() {
      return `
        <button
          class="ml-auto rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-white/75 hover:bg-white/10 hover:text-white"
          onclick="clearAll()"
        >
          Clear all
        </button>
      `;
    }

    function card(s) {
      const type = (s.type || "Signal");
      const isReportType = String(type).toLowerCase() === "report";
      const isAggregateType = String(type).toLowerCase() === "aggregate_signal";
      const source = (s.source || "—");
      const id = (s.id || "");
      const name = (s.name || "");
      const desc = (s.description || "");
      const url = (s.signal_url || "");
      const outbound = Array.isArray(s.outbound_connections) ? s.outbound_connections : [];
      const methodology = Array.isArray(s.methodology_urls) ? s.methodology_urls : [];

      const outboundPills = outbound.slice(0,4).map(c =>
        `<span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm text-white/90">${outboundLabel(c)}</span>`
      ).join("");

      const more = outbound.length > 4
        ? `<span class="text-xs text-white/50">+${outbound.length - 4} more</span>`
        : "";

      const methLinks = methodology.slice(0,2).map(u =>
        `<a href="${u}" class="inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-white/70 hover:bg-white/10 hover:text-white">
          Methodology <span class="inline-block h-3.5 w-3.5 rounded bg-white/20"></span>
        </a>`
      ).join("");

      const methNone = methodology.length === 0
        ? `<span class="text-xs text-white/50">No methodology link</span>`
        : "";

      const openBtn = url
        ? `<a href="${url}" class="inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-white/75 hover:bg-white/10 hover:text-white">
            Open <span class="inline-block h-3.5 w-3.5 rounded bg-white/20"></span>
          </a>`
        : "";

      let typeBadge = "";
      if (isReportType) {
        typeBadge = `<span class="ml-2 inline-flex items-center rounded-full border border-amber-200/40 bg-amber-400/20 px-2 py-0.5 text-[11px] uppercase tracking-wide text-amber-100">Report</span>`;
      } else if (isAggregateType) {
        typeBadge = `<span class="ml-2 inline-flex items-center rounded-full border border-cyan-200/50 bg-cyan-400/20 px-2 py-0.5 text-[11px] uppercase tracking-wide text-cyan-100">Aggregate</span>`;
      }

      let cardClass = "rounded-3xl border border-white/10 bg-white/5 p-5 shadow-[0_20px_80px_-40px_rgba(0,0,0,0.9)] backdrop-blur";
      if (isReportType) {
        cardClass = "rounded-3xl border border-amber-300/40 bg-amber-500/10 p-5 shadow-[0_20px_80px_-40px_rgba(251,191,36,0.45)] backdrop-blur";
      } else if (isAggregateType) {
        cardClass = "rounded-3xl border border-cyan-300/50 bg-cyan-500/10 p-5 shadow-[0_20px_80px_-40px_rgba(34,211,238,0.5)] backdrop-blur";
      }

      return `
        <div class="${cardClass}">
          <div class="flex items-start justify-between gap-4">
            <div>
              <div class="flex items-center text-xs text-white/60">${source}${typeBadge}</div>
              <div class="mt-1 text-lg font-semibold text-white">${name}</div>
              <div class="mt-1 text-xs text-white/50">${id}</div>
            </div>
            ${openBtn}
          </div>

          <div class="mt-4 line-clamp-3 text-sm leading-relaxed text-white/75">${desc}</div>

          <div class="mt-4 flex flex-wrap gap-2">
            ${outboundPills}${more}
          </div>

          <div class="mt-4 flex flex-wrap gap-2">
            ${methLinks}${methNone}
          </div>
        </div>
      `;
    }

    // ----------------------------
    // State
    // ----------------------------
    let query = "";
    let sourceFilter = "";   // single select to match canvas
    let signalFilter = "";
    let aggregateFilter = "";
    let outboundFilter = ""; // single select to match canvas
    let strategyFilter = "";

    // ----------------------------
    // DOM refs
    // ----------------------------
    const elSearch = document.getElementById("searchInput");
    const elSource = document.getElementById("sourceSelect");
    const elSignal = document.getElementById("signalSelect");
    const elAggregate = document.getElementById("aggregateSelect");
    const elOutbound = document.getElementById("outboundSelect");
    const elStrategy = document.getElementById("strategySelect");
    const elCards = document.getElementById("cardsGrid");
    const elPills = document.getElementById("activePills");
    const elShow = document.getElementById("showCount");
    const elTotal = document.getElementById("totalCount");
    const elStatSignals = document.getElementById("statSignals");
    const elStatAggregates = document.getElementById("statAggregates");
    const elStatReports = document.getElementById("statReports");
    const elStatStrategy = document.getElementById("statStrategy");

    // ----------------------------
    // Init filter vocab
    // ----------------------------
    const allSources = uniq(SIGNALS.map(s => (s.source || "").trim()).filter(Boolean));
    const allSignals = SIGNALS.filter(isSignal).map(s => ({ id: s.id, label: optionLabel(s) }));
    const allAggregates = SIGNALS.filter(isAggregate).map(s => ({ id: s.id, label: optionLabel(s) }));
    const allStrategies = SIGNALS.filter(isStrategy).map(s => ({ id: s.id, label: optionLabel(s) }));
    const allOutbound = Array.from(new Set(
      SIGNALS.flatMap(s => Array.isArray(s.outbound_connections) ? s.outbound_connections : [])
    ));
    allOutbound.sort((a, b) => String(outboundLabel(a)).localeCompare(String(outboundLabel(b))));

    function populateSelect(selectEl, values, labelForValue) {
      for (const v of values) {
        const opt = document.createElement("option");
        opt.value = v;
        opt.textContent = labelForValue ? labelForValue(v) : v;
        selectEl.appendChild(opt);
      }
    }

    populateSelect(elSource, allSources);
    populateSelect(elOutbound, allOutbound, outboundLabel);
    allSignals.sort((a, b) => String(a.label).localeCompare(String(b.label)));
    allAggregates.sort((a, b) => String(a.label).localeCompare(String(b.label)));
    allStrategies.sort((a, b) => String(a.label).localeCompare(String(b.label)));
    populateSelect(elSignal, allSignals.map(s => s.id), (id) => (allSignals.find(s => s.id === id) || {}).label || id);
    populateSelect(elAggregate, allAggregates.map(s => s.id), (id) => (allAggregates.find(s => s.id === id) || {}).label || id);
    populateSelect(elStrategy, allStrategies.map(s => s.id), (id) => (allStrategies.find(s => s.id === id) || {}).label || id);

    elStatSignals.textContent = String(SIGNALS.filter(isSignal).length);
    elStatAggregates.textContent = String(SIGNALS.filter(isAggregate).length);
    elStatReports.textContent = String(SIGNALS.filter(isReport).length);
    elStatStrategy.textContent = String(SIGNALS.filter(isStrategy).length);
    elTotal.textContent = String(SIGNALS.length);

    // ----------------------------
    // Filtering
    // ----------------------------
    function matchesQueryAndSource(s) {
      if (sourceFilter && (s.source || "") !== sourceFilter) return false;
      if (signalFilter && (!isSignal(s) || (s.id || "") !== signalFilter)) return false;
      if (aggregateFilter && (!isAggregate(s) || (s.id || "") !== aggregateFilter)) return false;
      if (strategyFilter && (!isStrategy(s) || (s.id || "") !== strategyFilter)) return false;

      const q = query.trim().toLowerCase();
      if (!q) return true;

      const blob = [
        s.id, s.name, s.source, s.description,
        ...(Array.isArray(s.outbound_connections) ? s.outbound_connections : [])
      ].filter(Boolean).join(" ").toLowerCase();

      return blob.includes(q);
    }

    function matches(s) {
      if (!matchesQueryAndSource(s)) return false;

      if (outboundFilter) {
        const outs = Array.isArray(s.outbound_connections) ? s.outbound_connections : [];
        if (!outs.includes(outboundFilter)) return false;
      }
      return true;
    }

    function renderPills() {
      const hasAny = Boolean(query.trim() || sourceFilter || signalFilter || aggregateFilter || outboundFilter || strategyFilter);

      let html = "";
      if (sourceFilter) {
        html += pill(`Source: ${sourceFilter}`, "setSource('')");
      }
      if (signalFilter) {
        const match = allSignals.find(s => s.id === signalFilter);
        html += pill(`Signal: ${(match && match.label) || signalFilter}`, "setSignal('')");
      }
      if (aggregateFilter) {
        const match = allAggregates.find(s => s.id === aggregateFilter);
        html += pill(`Aggregate: ${(match && match.label) || aggregateFilter}`, "setAggregate('')");
      }
      if (outboundFilter) {
        html += pill(`Report: ${outboundLabel(outboundFilter)}`, "setOutbound('')");
      }
      if (strategyFilter) {
        const match = allStrategies.find(s => s.id === strategyFilter);
        html += pill(`Strategy: ${(match && match.label) || strategyFilter}`, "setStrategy('')");
      }
      if (hasAny) {
        html += clearButton();
      }
      elPills.innerHTML = html;
    }

    function render() {
      let filtered = SIGNALS.filter(matches);

      if (outboundFilter) {
        const report = SIGNALS.find(s =>
          (s.id || "") === outboundFilter &&
          String(s.type || "").toLowerCase() === "report"
        );
        if (report && matchesQueryAndSource(report)) {
          const exists = filtered.some(s => (s.id || "") === report.id);
          if (!exists) {
            filtered = [report, ...filtered];
          }
        }
      }
      elShow.textContent = String(filtered.length);
      elCards.innerHTML = filtered.map(card).join("");
      renderPills();
    }

    // ----------------------------
    // Public setters (used by pill onclick)
    // ----------------------------
    function setSource(v) {
      sourceFilter = v || "";
      elSource.value = sourceFilter;
      render();
    }
    function setSignal(v) {
      signalFilter = v || "";
      elSignal.value = signalFilter;
      render();
    }
    function setAggregate(v) {
      aggregateFilter = v || "";
      elAggregate.value = aggregateFilter;
      render();
    }
    function setOutbound(v) {
      outboundFilter = v || "";
      elOutbound.value = outboundFilter;
      render();
    }
    function setStrategy(v) {
      strategyFilter = v || "";
      elStrategy.value = strategyFilter;
      render();
    }
    function clearAll() {
      query = "";
      sourceFilter = "";
      signalFilter = "";
      aggregateFilter = "";
      outboundFilter = "";
      strategyFilter = "";
      elSearch.value = "";
      elSource.value = "";
      elSignal.value = "";
      elAggregate.value = "";
      elOutbound.value = "";
      elStrategy.value = "";
      render();
    }

    // expose for inline onclick
    window.setSource = setSource;
    window.setSignal = setSignal;
    window.setAggregate = setAggregate;
    window.setOutbound = setOutbound;
    window.setStrategy = setStrategy;
    window.clearAll = clearAll;

    // ----------------------------
    // Wire events
    // ----------------------------
    elSearch.addEventListener("input", (e) => {
      query = e.target.value || "";
      render();
    });
    elSource.addEventListener("change", (e) => {
      sourceFilter = e.target.value || "";
      render();
    });
    elSignal.addEventListener("change", (e) => {
      signalFilter = e.target.value || "";
      render();
    });
    elAggregate.addEventListener("change", (e) => {
      aggregateFilter = e.target.value || "";
      render();
    });
    elOutbound.addEventListener("change", (e) => {
      outboundFilter = e.target.value || "";
      render();
    });
    elStrategy.addEventListener("change", (e) => {
      strategyFilter = e.target.value || "";
      render();
    });

    // initial paint
    render();
  </script>
</body>
</html>
