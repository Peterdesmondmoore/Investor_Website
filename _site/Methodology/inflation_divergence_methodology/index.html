<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PPI–CPI Divergence as an Inflation Regime Indicator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body{font-family:"Merriweather",serif}
    h1,h2,h3,h4{font-family:"Inter",sans-serif}
    .container{max-width:960px}
    .rule{height:1px;background:linear-gradient(90deg,#e5e7eb,transparent)}
    .smallcaps{font-variant-caps:all-small-caps;letter-spacing:.04em}
    @media print{
      nav, .screen-only{display:none!important}
      .prose a{text-decoration:underline}
      body{color:#000}
    }
    .eq{font-family:"Merriweather",serif;font-style:italic}
    .box{border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;background:#fafafa}
    code{background:#f6f8fa;padding:.15rem .35rem;border-radius:.35rem}
  </style>
</head>
<body class="bg-white text-slate-800">
  <nav class="screen-only border-b">
    <div class="container mx-auto px-5 py-3 flex items-center justify-between text-sm text-slate-600">
      <div class="smallcaps">Methodology White Paper</div>
      <div>Version 1.0</div>
    </div>
  </nav>

  <main class="container mx-auto px-5 py-10">
    <header class="mb-10">
      <h1 class="text-3xl md:text-4xl font-semibold text-slate-900">Detecting Inflationary Regimes via Producer–Consumer Price Divergence</h1>
      <div class="mt-2 text-slate-600 text-sm">A reproducible statistical specification based on monthly US price indices (2005–present).</div>
    </header>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold text-slate-900 mb-3">Abstract</h2>
      <p class="leading-7">This paper formalises a rule-based indicator of inflationary pressure that exploits divergence between the Producer Price Index (PPI) and the Consumer Price Index (CPI). Year-on-year rates are transformed into a differential series and standardised using a rolling median and median absolute deviation (MAD) to obtain a robust <span class="eq">z</span>-score. Thresholds applied to the robustised differential, conditional on the absolute level of CPI, yield categorical regimes—<em>HOT</em>, <em>NEUTRAL</em>, and <em>COOL</em>. The specification is designed for operational use in macro monitoring and portfolio overlays.</p>
    </section>

    <div class="rule mb-10"></div>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">1. Data</h2>
      <ul class="list-disc pl-6 leading-7">
        <li><strong>CPI:</strong> Consumer Price Index for All Urban Consumers (<code>CPIAUCSL</code>), monthly, not seasonally adjusted.</li>
        <li><strong>PPI:</strong> Producer Price Index for All Commodities (<code>PPIACO</code>), monthly, not seasonally adjusted.</li>
        <li><strong>USREC:</strong> NBER Recession Indicator (<code>USREC</code>), monthly indicator (optional for contextual overlays).</li>
      </ul>
      <p class="leading-7 mt-3">Observations are merged on <code>Date</code> using an outer join, restricted to <strong>2005‑01‑01 onwards</strong> to focus on the modern inflation regime. Where higher-frequency irregularities occur, the series are conformed to month-end by last observation carried forward within the month.</p>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">2. Methodology</h2>
      <ol class="list-decimal pl-6 leading-7">
        <li>Convert <code>Date</code> to timezone-naïve monthly timestamps; sort ascending.</li>
        <li>Compute year-on-year inflation rates:
          <div class="box mt-2 text-sm">
            <div class="eq">CPI<sub>YoY,t</sub> = 100 × (CPI<sub>t</sub> − CPI<sub>t−12</sub>)/CPI<sub>t−12</sub></div>
            <div class="eq">PPI<sub>YoY,t</sub> = 100 × (PPI<sub>t</sub> − PPI<sub>t−12</sub>)/PPI<sub>t−12</sub></div>
          </div>
        </li>
        <li>Calculate divergence and robust z‑score:
          <div class="box mt-2 text-sm">
            <div class="eq">D<sub>t</sub> = PPI<sub>YoY,t</sub> − CPI<sub>YoY,t</sub></div>
            <div class="eq">z<sub>t</sub> = (D<sub>t</sub> − Median(D<sub>t−w+1:t</sub>)) / (1.4826 × MAD(D<sub>t−w+1:t</sub>))</div>
          </div>
        </li>
        <li>Apply classification rules:
          <div class="box text-sm mt-2">
            <ul class="list-disc pl-6">
              <li><strong>HOT:</strong> <span class="eq">z<sub>t</sub> ≥ 1.0</span> or (<span class="eq">z<sub>t</sub> ≥ 0.75</span> and <span class="eq">CPI<sub>YoY,t</sub> ≥ 3.0%</span>)</li>
              <li><strong>COOL:</strong> <span class="eq">z<sub>t</sub> ≤ −1.0</span> or (<span class="eq">z<sub>t</sub> ≤ −0.5</span> and <span class="eq">CPI<sub>YoY,t</sub> ≤ 1.5%</span>)</li>
              <li><strong>NEUTRAL:</strong> otherwise</li>
            </ul>
          </div>
        </li>
      </ol>
      <p class="leading-7 mt-3">The robust standardisation uses a 60‑month rolling window to balance responsiveness and stability. Windows with <span class="eq">MAD = 0</span> are excluded from classification.</p>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">3. Sensitivity and Limitations</h2>
      <ul class="list-disc pl-6 leading-7">
        <li>Thresholds (±1.0, ±0.75, ±0.5) approximate 75th/25th percentile cut‑offs; these can be recalibrated to adjust signal frequency.</li>
        <li>Energy and food price shocks may distort short‑term readings; the robust approach mitigates but does not eliminate this effect.</li>
        <li>Pass‑through from producer to consumer prices is not instantaneous; interpret signals as directional indicators.</li>
      </ul>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">4. Implementation Notes</h2>
      <div class="box text-sm">
<pre><code>def _robust_zscore(s, window=60):
    s = s.astype(float)
    med = s.rolling(window, min_periods=1).median()
    mad = (s - med).abs().rolling(window, min_periods=1).median()
    z = (s - med) / (mad.replace(0, float('nan')) * 1.4826)
    return z

monthly['CPI_YoY'] = monthly['CPIAUCSL_Value'].pct_change(12) * 100
monthly['PPI_YoY'] = monthly['PPIACO_Value'].pct_change(12) * 100
monthly['PPI_minus_CPI_YoY'] = monthly['PPI_YoY'] - monthly['CPI_YoY']
monthly['divergence_z'] = _robust_zscore(monthly['PPI_minus_CPI_YoY'], window=60)

# Classification
def map_inflation_signal(row):
    if pd.isna(row['CPI_YoY']) or pd.isna(row['PPI_YoY']) or pd.isna(row['divergence_z']):
        return 'NEUTRAL'
    if (row['CPI_YoY'] >= 3.0 and row['divergence_z'] >= 0.75) or row['divergence_z'] >= 1.0:
        return 'HOT'
    if (row['CPI_YoY'] <= 1.5 and row['divergence_z'] <= -0.5) or row['divergence_z'] <= -1.0:
        return 'COOL'
    return 'NEUTRAL'
</code></pre>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-3">5. Reproducibility</h2>
      <ul class="list-disc pl-6 leading-7">
        <li>Record data provenance (<code>CPIAUCSL</code>, <code>PPIACO</code>, <code>USREC</code>) and revision dates.</li>
        <li>Fix window size, threshold, and software environment for deterministic results.</li>
        <li>Persist panel output and categorical signals with timestamps for traceability.</li>
      </ul>
    </section>

    <section class="mb-16">
      <h2 class="text-2xl font-semibold mb-3">6. Applications</h2>
      <p class="leading-7">This indicator can be integrated into macroeconomic dashboards, inflation‑linked asset overlays, and multi‑factor allocation models. Combining it with recession overlays and survey price expectations enhances signal validation.</p>
    </section>

    <footer class="text-sm text-slate-500 border-t pt-6">© 2025. Prepared for internal research and investment analytics. Print‑friendly; single data specification.</footer>
  </main>
</body>
</html>
